<a name="usage"></a>

<div class="panel panel-default" id="pnlUsage">
  <div class="panel-heading">
    <a href="#/item/new" 
        class='btn btn-success btn-sm pull-right'>New</a>
    <h3 class="panel-title pull-left">
      Usage <small>Calculate Watt Hours</small>
    </h3>
    <div class="clearfix"></div>
  </div>
  <table class="table table-hover table-bordered">
  <thead>
    <tr>
      <th>Name</th>
      <th>Watts</th>
      <th>Hours</th>
<!--       <th title="Need, Want or Luxury">Priority</th>
 -->
      <th width="140">Watt Hours</th>     
    </tr>
  </thead>
  <tbody>
  {% var totalWatts = 0 ;%}
  {% var index      = 0 ;%}
  {% var prios = Watts.priorities ;%}
  {% for(var i = 0 ; i < prios.length ; i++ ){ %}
    {% var usageItems = Watts.itemsBy(prios[i]) ; %}
    {% if( usageItems.length > 0 ) { %}
      {% for(var ui = 0 ; ui < usageItems.length ; ui++ ){ %}
        <tr onclick="document.location='#/item/{%= index %}'" class="trItem">
          <td >{%= usageItems[ui].name %}</td>
          <td >{%= usageItems[ui].watts %}</td>
          <td >{%= usageItems[ui].hours %}</td>
          <td >{%= (usageItems[ui].hours * usageItems[ui].watts).toLocaleString() %}</td>
        </tr>
       {% totalWatts += (usageItems[ui].hours * usageItems[ui].watts); %}
       {% index++ ;%}
     {% } %}
     <tr>
        <td class="subtotal" colspan="3">
          {% if(prios[i] == 'Need') { %}
            <b>Need</b>
          {% } %}        
          {% if(prios[i] == 'Want') { %}
            ({%= Watts.byPriority('Need').toLocaleString() %} + <b>{%= Watts.byPriority('Want').toLocaleString()%}</b> ) <b>Want</b>
          {% } %}
          {% if(prios[i] == 'Luxury') { %}
            ({%= Watts.byPriority('Need').toLocaleString() %} + {%= Watts.byPriority('Want').toLocaleString() %} + <b>{%= Watts.byPriority('Luxury').toLocaleString() %}</b>) <b>Luxury</b>
          {% } %}        
        </td>
        <td class="total prio-{%= prios[i] %}"><b>{%= Watts.sumOfBy(prios[i]).toLocaleString() %}</b></td>
      </tr>
    {% } %}

  {% } %}
 </tbody>
  </table>
</div>